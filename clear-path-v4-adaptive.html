<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Clear Path Â· Academic Skills (Adaptive)</title>
<meta name="theme-color" content="#0d1117"/>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet"/>

<style>
/* â”€â”€â”€ TOKENS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
:root {
  --bg:        #0d1117;
  --surface:   #161c24;
  --surface2:  #1c242f;
  --border:    rgba(255,255,255,.09);
  --border-hi: rgba(120,240,177,.35);
  --fg:        #e8f2ee;
  --muted:     #8fa99c;
  --green:     #78f0b1;
  --green-dim: rgba(120,240,177,.13);
  --green-glow:rgba(120,240,177,.22);
  --amber:     #ffd166;
  --amber-dim: rgba(255,209,102,.12);
  --rose:      #ff7b9c;
  --rose-dim:  rgba(255,123,156,.10);
  --sky:       #7ec8e3;
  --sky-dim:   rgba(126,200,227,.12);

  --r-sm: 10px;
  --r:    16px;
  --r-lg: 22px;

  --font-body:  'Nunito', sans-serif;
  --font-mono:  'Space Mono', monospace;

  --ease-spring: cubic-bezier(.34,1.56,.64,1);
  --ease-smooth: cubic-bezier(.4,0,.2,1);
}

/* â”€â”€â”€ RESET â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: var(--font-body);
  background: var(--bg);
  color: var(--fg);
  min-height: 100dvh;
  font-size: 17px;
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  background-image:
    radial-gradient(ellipse 120% 60% at 10% 0%, rgba(120,240,177,.06) 0%, transparent 60%),
    radial-gradient(ellipse 80% 50% at 90% 100%, rgba(126,200,227,.05) 0%, transparent 55%);
}
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(255,255,255,.15); border-radius: 99px; }

/* â”€â”€â”€ LAYOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.app { max-width: 680px; margin: 0 auto; padding: 24px 18px 80px; }

/* â”€â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.app-header { display: flex; align-items: center; gap: 14px; margin-bottom: 28px; }
.app-logo {
  width: 42px; height: 42px; border-radius: var(--r-sm);
  background: var(--green-dim); border: 1px solid var(--border-hi);
  display: flex; align-items: center; justify-content: center;
  font-size: 22px; flex-shrink: 0;
}
.app-title { font-size: 22px; font-weight: 900; letter-spacing: -.3px; }
.app-subtitle { font-size: 14px; color: var(--muted); margin-top: 1px; }

/* â”€â”€â”€ BREADCRUMB NAV â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.breadcrumb {
  display: flex; gap: 4px; align-items: center; flex-wrap: wrap;
  margin-bottom: 22px; padding: 10px 14px;
  background: var(--surface); border: 1px solid var(--border); border-radius: var(--r);
  font-size: 13px;
}
.breadcrumb-step {
  display: flex; align-items: center; gap: 5px; color: var(--muted); cursor: pointer;
  padding: 3px 8px; border-radius: 6px;
  transition: background .15s, color .15s; white-space: nowrap;
}
.breadcrumb-step:hover { background: rgba(255,255,255,.06); color: var(--fg); }
.breadcrumb-step.active { color: var(--green); font-weight: 700; }
.breadcrumb-step .dot {
  width: 7px; height: 7px; border-radius: 50%;
  background: var(--border); transition: background .15s; flex-shrink: 0;
}
.breadcrumb-step.active .dot { background: var(--green); }
.breadcrumb-sep { color: rgba(255,255,255,.18); font-size: 11px; user-select: none; }

/* â”€â”€â”€ SCREENS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.screen { display: none; animation: fadeUp .28s var(--ease-smooth) both; }
.screen.active { display: block; }
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* â”€â”€â”€ CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.card {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--r-lg); overflow: hidden; margin-bottom: 14px;
}
.card-head {
  padding: 16px 18px; border-bottom: 1px solid var(--border);
  display: flex; align-items: flex-start; justify-content: space-between; gap: 12px;
}
.card-head-text h2 { font-size: 19px; font-weight: 800; }
.card-head-text p  { font-size: 14px; color: var(--muted); margin-top: 3px; }
.card-body { padding: 16px 18px; }

/* â”€â”€â”€ BLOCK (nested card) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.block {
  background: var(--surface2); border: 1px solid var(--border);
  border-radius: var(--r); padding: 14px 16px; margin-bottom: 12px;
}
.block:last-child { margin-bottom: 0; }
.block-title {
  display: flex; align-items: center; justify-content: space-between; gap: 8px;
  font-weight: 700; font-size: 15px; margin-bottom: 8px;
}

/* â”€â”€â”€ BADGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.badge {
  display: inline-flex; align-items: center;
  font-size: 11px; font-weight: 700; letter-spacing: .4px; text-transform: uppercase;
  padding: 3px 9px; border-radius: 999px; border: 1px solid var(--border);
  color: var(--muted); background: rgba(255,255,255,.03); white-space: nowrap;
}
.badge.green { color: var(--green); border-color: rgba(120,240,177,.3); background: var(--green-dim); }
.badge.amber { color: var(--amber); border-color: rgba(255,209,102,.3); background: var(--amber-dim); }

/* â”€â”€â”€ BUTTONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
button { font-family: var(--font-body); cursor: pointer; }
.btn-row { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; }

/* Tile grid */
.tile-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
@media (max-width: 440px) { .tile-grid { grid-template-columns: 1fr; } }

.tile {
  display: flex; align-items: center; gap: 12px;
  padding: 16px 14px; border-radius: var(--r);
  border: 1px solid var(--border); background: var(--surface2);
  color: var(--fg); font-size: 16px; font-weight: 700; text-align: left;
  cursor: pointer; transition: border-color .18s, background .18s, transform .15s var(--ease-spring);
  position: relative; overflow: hidden;
}
.tile::before {
  content: ''; position: absolute; inset: 0;
  background: linear-gradient(135deg, rgba(255,255,255,.04) 0%, transparent 60%);
  opacity: 0; transition: opacity .18s;
}
.tile:hover { border-color: var(--green); background: rgba(120,240,177,.06); transform: translateY(-1px); }
.tile:hover::before { opacity: 1; }
.tile:active { transform: scale(.97); }
.tile .tile-icon { font-size: 22px; flex-shrink: 0; }
.tile .tile-label { line-height: 1.3; }
.tile .tile-hint { font-size: 12px; color: var(--muted); font-weight: 400; margin-top: 2px; }
.tile.c-amber:hover { border-color: var(--amber); background: var(--amber-dim); }
.tile.c-rose:hover  { border-color: var(--rose);  background: var(--rose-dim);  }
.tile.c-sky:hover   { border-color: var(--sky);   background: var(--sky-dim);   }

/* Standard button */
.btn {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 8px 14px; border-radius: var(--r-sm);
  border: 1px solid var(--border); background: var(--surface2);
  color: var(--fg); font-size: 14px; font-weight: 600;
  transition: border-color .15s, background .15s, transform .12s; white-space: nowrap;
}
.btn:hover { border-color: rgba(255,255,255,.25); background: rgba(255,255,255,.06); transform: translateY(-1px); }
.btn:active { transform: scale(.96); }
.btn.primary { color: var(--green); border-color: rgba(120,240,177,.35); background: var(--green-dim); }
.btn.primary:hover { background: rgba(120,240,177,.2); }
.btn.danger  { color: var(--rose);  border-color: rgba(255,123,156,.3); background: var(--rose-dim); }
.btn.sm { font-size: 12px; padding: 5px 10px; }

/* â”€â”€â”€ FORM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
label { display: block; font-size: 14px; color: var(--muted); font-weight: 600; margin-bottom: 6px; }
textarea, input:not([type=checkbox]):not([type=radio]), select {
  width: 100%; padding: 10px 13px; border-radius: var(--r-sm);
  border: 1px solid var(--border); background: var(--surface2); color: var(--fg);
  font-family: var(--font-body); font-size: 16px; line-height: 1.5; outline: none;
  transition: border-color .15s, box-shadow .15s; min-height: 44px;
}
textarea:focus, input:not([type=checkbox]):not([type=radio]):focus, select:focus {
  border-color: var(--border-hi); box-shadow: 0 0 0 3px rgba(120,240,177,.1);
}
textarea { min-height: 88px; resize: vertical; }
select { cursor: pointer; }
input[type=checkbox] {
  width: 20px !important; height: 20px !important; padding: 0 !important;
  border-radius: 6px; border: 2px solid rgba(255,255,255,.22);
  background: transparent; accent-color: var(--green); cursor: pointer; flex-shrink: 0;
}
.form-group { margin-bottom: 14px; }
.form-group:last-child { margin-bottom: 0; }

/* â”€â”€â”€ CHECKLIST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.check-item {
  display: flex; align-items: flex-start; gap: 12px;
  padding: 12px 14px; border: 1px solid var(--border); border-radius: var(--r-sm);
  margin-bottom: 8px; transition: border-color .15s, background .15s; cursor: pointer;
}
.check-item:hover { border-color: rgba(255,255,255,.18); background: rgba(255,255,255,.03); }
.check-item.done { border-color: rgba(120,240,177,.25); background: rgba(120,240,177,.04); }
.check-item.done .check-label { color: var(--muted); text-decoration: line-through; }
.check-label { flex: 1; font-size: 15px; line-height: 1.5; user-select: none; }
.check-item input { margin-top: 2px; }

/* â”€â”€â”€ ORB â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.orb-wrap { display: flex; justify-content: center; margin: 18px 0 14px; }
.orb {
  width: 140px; height: 140px; border-radius: 50%;
  border: 1px solid rgba(120,240,177,.25);
  background: radial-gradient(circle at 40% 40%, rgba(120,240,177,.25), rgba(120,240,177,.04) 70%);
  display: flex; align-items: center; justify-content: center;
  font-size: 14px; font-weight: 700; color: var(--green); letter-spacing: .5px;
  transition: transform 3.4s cubic-bezier(.4,0,.2,1), box-shadow 3.4s ease;
  box-shadow: 0 0 0 0 rgba(120,240,177,.15);
}
.orb.inhale { transform: scale(1.18); box-shadow: 0 0 0 20px rgba(120,240,177,.06), 0 0 60px rgba(120,240,177,.1); }
.orb.exhale { transform: scale(.86); box-shadow: 0 0 0 0 rgba(120,240,177,.0); }

/* â”€â”€â”€ TASK CHIPS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.chip-row { display: flex; flex-wrap: wrap; gap: 7px; margin-top: 10px; }
.chip {
  display: inline-flex; padding: 5px 11px; border-radius: 999px;
  border: 1px solid var(--border); background: var(--surface2);
  font-size: 13px; font-weight: 700; color: var(--muted); cursor: pointer;
  transition: border-color .15s, color .15s, background .15s, transform .12s var(--ease-spring);
}
.chip:hover { border-color: var(--green); color: var(--green); background: var(--green-dim); transform: scale(1.05); }
.chip.active { border-color: var(--green); color: var(--green); background: var(--green-dim); }

/* â”€â”€â”€ TIMER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.timer-face { text-align: center; padding: 20px 14px 14px; }
.timer-mode { font-size: 11px; font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase; color: var(--muted); margin-bottom: 6px; }
.timer-time { font-family: var(--font-mono); font-size: 52px; font-weight: 700; line-height: 1; color: var(--green); letter-spacing: -1px; transition: color .3s; }
.timer-time.break { color: var(--sky); }
.timer-hint { font-size: 13px; color: var(--muted); margin-top: 10px; }
.progress-bar-wrap { height: 4px; background: rgba(255,255,255,.07); border-radius: 99px; overflow: hidden; margin: 10px 0; }
.progress-bar { height: 100%; border-radius: 99px; background: linear-gradient(90deg, var(--green), rgba(120,240,177,.7)); transition: width .9s linear; }

/* â”€â”€â”€ INSIGHT BOX â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.insight {
  background: var(--surface2); border: 1px solid var(--border); border-radius: var(--r);
  padding: 16px; margin-top: 14px; animation: fadeUp .2s var(--ease-smooth) both;
}
.insight-title { font-weight: 800; font-size: 16px; margin-bottom: 8px; display: flex; align-items: center; gap: 8px; }
.insight-text { font-size: 15px; line-height: 1.75; color: var(--fg); white-space: pre-line; }

/* â”€â”€â”€ KIND WORDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.kind-words {
  font-size: 16px; line-height: 1.9; color: var(--green); font-weight: 600;
  padding: 20px; border-radius: var(--r); background: var(--green-dim);
  border: 1px solid rgba(120,240,177,.2); text-align: center;
  margin-top: 14px; display: none;
}
.kind-words.show { display: block; }
.kind-words div { margin-bottom: 4px; }

/* â”€â”€â”€ FINISH COUNT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.finish-count { font-size: 13px; color: var(--muted); margin-bottom: 12px; font-weight: 600; }
.finish-count span { color: var(--green); font-weight: 800; }

/* â”€â”€â”€ HELPERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.hidden { display: none !important; }
.mt-10 { margin-top: 10px; }
.mt-14 { margin-top: 14px; }
.text-muted { font-size: 14px; color: var(--muted); line-height: 1.6; }
.text-small { font-size: 14px; color: var(--muted); line-height: 1.65; }
.divider { border: none; border-top: 1px solid var(--border); margin: 14px 0; }

/* â”€â”€â”€ PROGRESS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.progress{ height: 10px; border-radius: 999px; background: rgba(255,255,255,.06); overflow:hidden; border:1px solid var(--border); }
.progress-bar{ height: 100%; width: 0%; background: linear-gradient(90deg, rgba(120,240,177,.35), rgba(120,240,177,.85)); border-radius: 999px; transition: width .25s ease; }

/* â”€â”€â”€ TOAST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.toast {
  position: fixed; bottom: 24px; left: 50%;
  transform: translateX(-50%) translateY(20px);
  background: var(--green); color: #0d1117;
  font-weight: 700; font-size: 14px; padding: 9px 20px; border-radius: 999px;
  opacity: 0; pointer-events: none;
  transition: opacity .2s, transform .2s var(--ease-spring); z-index: 99;
}
.toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

/* â”€â”€â”€ FOCUS / A11Y â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
:focus-visible { outline: 2px solid var(--green); outline-offset: 2px; border-radius: 4px; }
.skip-link { position: absolute; top: -999px; left: 8px; background: var(--green); color: #000; font-weight: 700; padding: 8px 14px; border-radius: var(--r-sm); font-size: 14px; z-index: 100; }
.skip-link:focus { top: 8px; }
</style>
</head>

<body>
<a href="#main" class="skip-link">Skip to content</a>
<div id="toast" class="toast" role="status" aria-live="polite"></div>

<div class="app" id="main">

  <!-- HEADER -->
  <header class="app-header" role="banner">
    <div class="app-logo" aria-hidden="true">ğŸ§­</div>
    <div>
      <div class="app-title">Clear Path</div>
      <div class="app-subtitle">Academic Skills Â· One step at a time</div>
    </div>
  </header>

  <!-- NAV BREADCRUMB -->
  <nav class="breadcrumb" id="breadcrumb" aria-label="Section navigation">
    <div class="breadcrumb-step" data-nav="home" role="button" tabindex="0"><div class="dot"></div>Home</div>
    <span class="breadcrumb-sep" aria-hidden="true">â€º</span>
    <div class="breadcrumb-step" data-nav="start" role="button" tabindex="0"><div class="dot"></div>Start</div>
    <span class="breadcrumb-sep" aria-hidden="true">â€º</span>
    <div class="breadcrumb-step" data-nav="understand" role="button" tabindex="0"><div class="dot"></div>Understand</div>
    <span class="breadcrumb-sep" aria-hidden="true">â€º</span>
    <div class="breadcrumb-step" data-nav="calm" role="button" tabindex="0"><div class="dot"></div>Calm</div>
    <span class="breadcrumb-sep" aria-hidden="true">â€º</span>
    <div class="breadcrumb-step" data-nav="stress" role="button" tabindex="0"><div class="dot"></div>Stress</div>
    <span class="breadcrumb-sep" aria-hidden="true">â€º</span>
    <div class="breadcrumb-step" data-nav="finish" role="button" tabindex="0"><div class="dot"></div>Finish</div>
  </nav>

  <!-- HOME -->
  <section class="screen" id="screen-home" aria-label="Home">
    <div class="card">
      <div class="card-head">
        <div class="card-head-text">
          <h2>Where do you need to go?</h2>
          <p>One step is always enough.</p>
        </div>
      </div>
      <div class="card-body">
        <div class="tile-grid">
          <button class="tile" data-nav="start">
            <span class="tile-icon" aria-hidden="true">â–¶</span>
            <div class="tile-label">Start<div class="tile-hint">Prepare &amp; begin</div></div>
          </button>
          <button class="tile c-sky" data-nav="understand">
            <span class="tile-icon" aria-hidden="true">ğŸ§©</span>
            <div class="tile-label">Understand<div class="tile-hint">Unpack the question</div></div>
          </button>
          <button class="tile" data-nav="calm">
            <span class="tile-icon" aria-hidden="true">ğŸŒŠ</span>
            <div class="tile-label">Calm &amp; Focus<div class="tile-hint">Breathing &amp; grounding</div></div>
          </button>
          <button class="tile c-amber" data-nav="stress">
            <span class="tile-icon" aria-hidden="true">ğŸ«¶</span>
            <div class="tile-label">Manage Stress<div class="tile-hint">Strategies &amp; timers</div></div>
          </button>
          <button class="tile c-rose" data-nav="finish" style="grid-column:1/-1">
            <span class="tile-icon" aria-hidden="true">âœ…</span>
            <div class="tile-label">Finish<div class="tile-hint">Final checks before submitting</div></div>
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- START -->
  <section class="screen hidden" id="screen-start" aria-label="Prepare and begin">
    <div class="card">
      <div class="card-head">
        <div class="card-head-text">
          <h2>Prepare &amp; Begin</h2>
          <p>Check off what you can. Then choose your first step.</p>
        </div>
        <button class="btn sm" data-nav="home">â† Home</button>
      </div>
      <div class="card-body">
        <div id="prepList" role="list" aria-label="Preparation checklist"></div>
        <button class="btn sm mt-10" id="resetPrep">Reset checklist</button>

        <div class="block mt-14">
          <div class="block-title">
            Choose your starting point
            <span class="badge">no timer by default</span>
          </div>
          <p class="text-small">Feeling activated or anxious? Start with <strong>Calm &amp; Focus</strong>. Feeling clear? Go to <strong>Understand</strong>.</p>
          <div class="btn-row mt-10">
            <button class="btn primary" data-nav="calm">Begin with Calm &amp; Focus</button>
            <button class="btn" data-nav="understand">Begin with Understand</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- UNDERSTAND -->
  <section class="screen hidden" id="screen-understand" aria-label="Understand the assignment">
    <div class="card">
      <div class="card-head">
        <div class="card-head-text">
          <h2>Unpack the Question</h2>
          <p>Break it apart before you start writing.</p>
        </div>
        <button class="btn sm" data-nav="home">â† Home</button>
      </div>
      <div class="card-body">
        <div class="form-group">
          <label for="brief">Assignment question</label>
          <textarea id="brief" placeholder="Paste or type your assignment question hereâ€¦"></textarea>
        </div>

        <div class="btn-row" style="margin-bottom:14px">
          <button class="btn" id="toggleExample">ğŸ“‹ See an example</button>
          <button class="btn" id="clearUnderstand">Clear all</button>
        </div>

        <div class="block hidden" id="exampleCard">
          <div class="block-title">Example: how to unpack <span class="badge amber">tap "Use this"</span></div>
          <div class="text-small" style="margin-bottom:6px"><strong>Question:</strong> Analyse the impact of social media on adolescent wellbeing in Australia since 2020.</div>
          <div class="text-small" style="margin-bottom:4px"><strong>Task word:</strong> Analyse</div>
          <div class="text-small" style="margin-bottom:4px"><strong>Topic:</strong> Social media and adolescent wellbeing</div>
          <div class="text-small"><strong>Limits:</strong> Australia; since 2020</div>
          <div class="btn-row mt-10">
            <button class="btn primary" id="useExample">Use this example</button>
            <button class="btn" id="closeExample">Close</button>
          </div>
        </div>

        <div class="form-group">
          <label for="task">How are you being asked to approach it?</label>
          <input id="task" placeholder="e.g., analyse, discuss, evaluate, reflectâ€¦" autocomplete="off"/>
          <div id="task-help" class="text-small mt-10" style="min-height:18px"></div>
        </div>

        <div class="text-small" style="margin-bottom:6px">Quick-fill task words:</div>
        <div class="chip-row" id="taskChips" role="group" aria-label="Task word options"></div>

        <hr class="divider"/>

        <div class="form-group">
          <label for="topic">What is the general topic?</label>
          <input id="topic" placeholder="e.g., stress and learning"/>
        </div>

        <div class="form-group">
          <label for="limit">Limits: time, place, group, theory, method?</label>
          <input id="limit" placeholder="e.g., Australia, since 2020, mature-aged students"/>
        </div>

        <div class="btn-row">
          <button class="btn primary" id="saveUnderstand">ğŸ’¾ Save</button>
          <span class="text-small" id="savedBadge" aria-live="polite" style="min-height:18px"></span>
        </div>

        <p class="text-small mt-14" style="font-style:italic">ğŸ’¡ Task words tell you <em>how</em> to think. Limits tell you what to <em>include</em> â€” and what to leave out.</p>
      </div>
    </div>
  </section>

  <!-- CALM -->
  <section class="screen hidden" id="screen-calm" aria-label="Calm and focus tools">
    <div class="card">
      <div class="card-head">
        <div class="card-head-text">
          <h2>Calm &amp; Focus Tools</h2>
          <p>Pick one. You don't have to do all of them.</p>
        <p class="text-small mt-10">How are you feeling right now?</p>
        <div class="chip-row" aria-label="How are you feeling options">
          <button class="chip" type="button" data-state="overwhelmed">Overwhelmed</button>
          <button class="chip" type="button" data-state="scattered">Scattered</button>
          <button class="chip" type="button" data-state="avoiding">Avoiding</button>
          <button class="chip" type="button" data-state="flat">Flat</button>
        </div>
        </div>
        <button class="btn sm" data-nav="home">â† Home</button>
      </div>
      <div class="card-body">
        <div class="tile-grid">
          <button class="tile" data-calm="breath"><span class="tile-icon">ğŸŒ¬</span><div class="tile-label">Breath Anchor<div class="tile-hint">In 4, out 6</div></div></button>
          <button class="tile" data-calm="scan"><span class="tile-icon">ğŸ§</span><div class="tile-label">Body Scan<div class="tile-hint">Ground in the body</div></div></button>
          <button class="tile" data-calm="wander"><span class="tile-icon">ğŸ§ </span><div class="tile-label">Mind Wandering<div class="tile-hint">Noticing builds focus</div></div></button>
          <button class="tile" data-calm="note"><span class="tile-icon">ğŸ·</span><div class="tile-label">Gentle Noting<div class="tile-hint">Naming creates space</div></div></button>
          <button class="tile" data-calm="sense"><span class="tile-icon">ğŸ‘</span><div class="tile-label">Six Senses<div class="tile-hint">Ground attention now</div></div></button>
          <button class="tile" data-calm="pulse"><span class="tile-icon">ğŸŒŠ</span><div class="tile-label">Visual Reset<div class="tile-hint">Watch the orb</div></div></button>
          <button class="tile" data-calm="kind" style="grid-column:1/-1"><span class="tile-icon">ğŸ«¶</span><div class="tile-label">Kind Words<div class="tile-hint">Reminder that slow is okay</div></div></button>
        </div>

        <div class="orb-wrap"><div class="orb exhale" id="orb" role="img" aria-label="Breathing orb">Ready</div></div>

        <div class="insight hidden" id="calmInsight" role="region" aria-live="polite">
          <div class="insight-title">
            <span id="calmInsightIcon"></span>
            <span id="calmInsightTitle">Choose a tool</span>
            <span class="badge green" id="calmBadge">tap above</span>
          </div>
          <div class="insight-text" id="calmInsightText"></div>
        </div>

        <div class="kind-words" id="kindWords" role="region" aria-live="polite"></div>

        <div class="btn-row mt-14">
          <button class="btn" data-nav="understand">Return to Understand</button>
          <button class="btn" data-nav="start">Back to Start</button>
          <a class="btn" id="openFieldFromCalm" href="https://coherence-nikolai.github.io/field/" target="_blank" rel="noopener">Open Field Reset</a>
        </div>
        <p class="text-small mt-10">Need structure? Try <strong>Focus Cycles</strong> in Manage Stress.</p>
      </div>
    </div>
  </section>

  <!-- STRESS -->
  <section class="screen hidden" id="screen-stress" aria-label="Manage study stress">
    <div class="card">
      <div class="card-head">
        <div class="card-head-text">
          <h2>Manage Study Stress</h2>
          <p>Small strategies. Real results.</p>
        </div>
        <button class="btn sm" data-nav="home">â† Home</button>
      </div>
      <div class="card-body">
        <div class="tile-grid">
          <button class="tile" data-stress="sleep"><span class="tile-icon">ğŸ›Œ</span><div class="tile-label">Sleep<div class="tile-hint">Memory &amp; emotion</div></div></button>
          <button class="tile" data-stress="break"><span class="tile-icon">ğŸ“µ</span><div class="tile-label">Breaks<div class="tile-hint">Reduce drain</div></div></button>
          <button class="tile" data-stress="move"><span class="tile-icon">ğŸƒ</span><div class="tile-label">Move<div class="tile-hint">Mood &amp; thinking</div></div></button>
          <button class="tile" data-stress="plan"><span class="tile-icon">ğŸ“…</span><div class="tile-label">Planning<div class="tile-hint">Reduce anxiety</div></div></button>
          <button class="tile" data-stress="chunk"><span class="tile-icon">ğŸ§©</span><div class="tile-label">Chunking<div class="tile-hint">Small wins matter</div></div></button>
          <button class="tile c-amber" data-stress="cycle"><span class="tile-icon">ğŸ•’</span><div class="tile-label">Focus Cycles<div class="tile-hint">Timer + structure</div></div></button>
          <button class="tile c-sky" data-stress="support" style="grid-column:1/-1"><span class="tile-icon">ğŸ«‚</span><div class="tile-label">Get Support<div class="tile-hint">Academic Skills, Studiosity &amp; more</div></div></button>
        </div>

        <div class="insight hidden" id="stressInsight" role="region" aria-live="polite">
          <div class="insight-title">
            <span id="stressInsightTitle">Choose a support</span>
            <span class="badge amber" id="stressBadge">tap above</span>
          </div>
          <div class="insight-text" id="stressInsightText"></div>
        </div>

        <div id="cycleBox" class="hidden mt-14" role="region" aria-label="Focus cycle timer">
          <div class="block">
            <div class="block-title">Focus Cycle Timer <span class="badge">optional</span></div>
            <p class="text-small">Adjust or stop anytime â€” you won't fail if you stop early.</p>
            <div class="btn-row mt-10">
              <div>
                <label for="workMin" style="margin-bottom:4px">Work</label>
                <select id="workMin" style="width:auto;min-width:100px">
                  <option value="10">10 min</option>
                  <option value="15">15 min</option>
                  <option value="25" selected>25 min</option>
                </select>
              </div>
              <div>
                <label for="breakMin" style="margin-bottom:4px">Break</label>
                <select id="breakMin" style="width:auto;min-width:100px">
                  <option value="3">3 min</option>
                  <option value="5" selected>5 min</option>
                  <option value="10">10 min</option>
                </select>
              </div>
            </div>
            <div class="timer-face">
              <div class="timer-mode" id="cycleMode">WORK</div>
              <div class="timer-time" id="cycleTime" aria-live="polite" aria-atomic="true">25:00</div>
              <div class="progress-bar-wrap"><div class="progress-bar" id="cycleBar" style="width:100%"></div></div>
              <div class="timer-hint" id="cycleHint">Start a cycle. Stop early if you need to.</div>
            </div>
            <div class="btn-row" style="justify-content:center">
              <button class="btn primary" id="cycleStart">â–¶ Start</button>
              <button class="btn" id="cycleStop">â¸ Pause</button>
              <button class="btn danger" id="cycleReset">â†º Reset</button>
            </div>
          </div>
        </div>

        <div class="btn-row mt-14">
          <button class="btn" data-nav="finish">Go to Finish</button>
          <button class="btn" data-nav="calm">Go to Calm &amp; Focus</button>
          <a class="btn" id="openFieldFromStress" href="https://coherence-nikolai.github.io/field/" target="_blank" rel="noopener">Open Field Reset</a>
        </div>
      </div>
    </div>
  </section>

  <!-- FINISH -->
  <section class="screen hidden" id="screen-finish" aria-label="Final submission checks">
    <div class="card">
      <div class="card-head">
        <div class="card-head-text">
          <h2>Finish &amp; Submit</h2>
          <p>Pick what applies to your assignment.</p>
        </div>
        <button class="btn sm" data-nav="home">â† Home</button>
      </div>
      <div class="card-body">
        <div class="finish-count" id="finishCount" aria-live="polite"></div>
        <div class="progress mt-10" aria-label="Finish checklist progress">
          <div class="progress-bar" id="finishBar"></div>
        </div>
        <div class="text-small mt-8" id="finishPercent"></div>
        <div id="finishList" role="list" aria-label="Final submission checklist"></div>
        <button class="btn sm mt-10" id="resetFinish">Reset checklist</button>
        <div class="block mt-14">
          <div class="block-title">Last step <span class="badge">reduce risk</span></div>
          <p class="text-small">If uncertain, tired, or stuck â€” book an Academic Skills appointment, or use any draft feedback service (e.g., Studiosity). Getting support is part of doing well.</p>
        </div>
      </div>
    </div>
  </section>

</div>

<script>
(function () {
  'use strict';

  /* â”€â”€ UTILS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  const $ = id => document.getElementById(id);
  const qsa = (sel, ctx = document) => [...ctx.querySelectorAll(sel)];

  function showToast(msg) {
    const t = $('toast');
    t.textContent = msg;
    t.classList.add('show');
    clearTimeout(t._tid);
    t._tid = setTimeout(() => t.classList.remove('show'), 2200);
  }

  function storage(key, val) {
    if (val === undefined) {
      try { return JSON.parse(localStorage.getItem(key)); } catch { return null; }
    }
    try { localStorage.setItem(key, JSON.stringify(val)); } catch {}
  }

  /* â”€â”€ NAVIGATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  const SCREENS = ['home','start','understand','calm','stress','finish'];

  function go(id) {
    if (!SCREENS.includes(id)) return;
    // Adaptive hints
    if (id === 'finish') {
      const u = storage(UNDERSTAND_KEY) || {};
      const hasUnpacked = !!(u.brief || u.task || u.topic || u.limit);
      const f = storage(FINISH_KEY) || [];
      const done = Array.isArray(f) ? f.filter(x=>x.done).length : 0;
      if (!hasUnpacked) showToast('Tip: Unpack the question in Understand before final checks.');
      if (done === 0) showToast('Finish works best as a quick sweep â€” tick what applies.');
    }
    if (id === 'understand') {
      const u = storage(UNDERSTAND_KEY) || {};
      if (!u.brief) showToast('Paste the question first â€” then unpack task word, topic, limits.');
    }

    SCREENS.forEach(s => {
      const el = $(`screen-${s}`);
      if (!el) return;
      const isActive = s === id;
      el.classList.toggle('hidden', !isActive);
      el.classList.toggle('active', isActive);
    });
    qsa('.breadcrumb-step').forEach(el =>
      el.classList.toggle('active', el.dataset.nav === id)
    );
    if (id === 'finish') renderFinish();
    if (id === 'start')  renderPrep();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  // Single delegated event for all [data-nav] elements
  document.addEventListener('click', e => {
    const el = e.target.closest('[data-nav]');
    if (el) go(el.dataset.nav);
  });
  document.addEventListener('keydown', e => {
    if (e.key === 'Enter' || e.key === ' ') {
      const el = e.target.closest('[data-nav]');
      if (el && el.tagName !== 'BUTTON') { e.preventDefault(); go(el.dataset.nav); }
    }
  });

    // Feelings-to-tool routing (Calm & Focus)
  const STATE_TO_CALM = {
    overwhelmed: { tool: 'breath', msg: 'Overwhelmed â†’ start with breath (in 4, out 6).' },
    scattered:   { tool: 'sense',  msg: 'Scattered â†’ ground in the senses.' },
    avoiding:    { tool: 'kind',   msg: 'Avoiding â†’ kind words, then one tiny step.' },
    flat:        { tool: 'pulse',  msg: 'Flat â†’ visual reset to re-engage gently.' }
  };

  document.addEventListener('click', e => {
    const btn = e.target.closest('[data-state]');
    if (!btn) return;
    const key = btn.dataset.state;
    const pick = STATE_TO_CALM[key];
    if (!pick) return;
    go('calm');
    setTimeout(() => {
      showCalm(pick.tool);
      showToast(pick.msg);
    }, 60);
  });


/* â”€â”€ PREP CHECKLIST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  const PREP_KEY   = 'cp_prep';
  const PREP_ITEMS = [
    'Set up your desk or workspace',
    'Close extra browser tabs',
    'Open your document or task',
    'Read the question or task once',
    'Choose your very first action'
  ];

  function loadPrep() {
    const s = storage(PREP_KEY);
    return (Array.isArray(s) && s.length === PREP_ITEMS.length) ? s : PREP_ITEMS.map(t => ({ t, done: false }));
  }

  function renderPrep() {
    const container = $('prepList');
    const items = loadPrep();
    container.innerHTML = '';
    items.forEach((item, i) => {
      const row = document.createElement('div');
      row.className = 'check-item' + (item.done ? ' done' : '');
      row.setAttribute('role', 'listitem');
      row.innerHTML = `<input type="checkbox" id="p${i}" ${item.done ? 'checked' : ''} aria-label="${item.t}">
        <label class="check-label" for="p${i}">${item.t}</label>`;
      row.querySelector('input').addEventListener('change', e => {
        items[i].done = e.target.checked;
        row.classList.toggle('done', items[i].done);
        storage(PREP_KEY, items);
      });
      container.appendChild(row);
    });
  }

  $('resetPrep').addEventListener('click', () => {
    storage(PREP_KEY, PREP_ITEMS.map(t => ({ t, done: false })));
    renderPrep();
    showToast('Checklist reset âœ“');
  });

  /* â”€â”€ UNDERSTAND â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  const UNDERSTAND_KEY = 'cp_understand';
  const TASK_DEFS = {
    analyse:   'Break into parts and explain how they connect.',
    discuss:   'Explore different views with evidence.',
    evaluate:  'Judge strengths and weaknesses using sources.',
    reflect:   'Link personal experience with theory.',
    describe:  'Give clear, detailed information.',
    compare:   'Show similarities and differences.',
    explain:   'Show how and why something happens.',
    justify:   'Support your position with reasons.',
    summarise: 'Present key points briefly.',
    synthesise:'Combine sources to form a clear overall position.'
  };

  const loadUnderstand = () => storage(UNDERSTAND_KEY) || { brief: '', task: '', topic: '', limit: '' };

  function saveUnderstand() {
    storage(UNDERSTAND_KEY, {
      brief: $('brief').value, task: $('task').value,
      topic: $('topic').value, limit: $('limit').value
    });
    showToast('Saved âœ“');
    const badge = $('savedBadge');
    badge.textContent = 'âœ“ Saved';
    clearTimeout(badge._tid);
    badge._tid = setTimeout(() => badge.textContent = '', 2500);
    updateTaskHelp();
  }

  function clearUnderstand() {
    ['brief','task','topic','limit'].forEach(id => $(id).value = '');
    storage(UNDERSTAND_KEY, { brief:'', task:'', topic:'', limit:'' });
    $('task-help').textContent = '';
    qsa('.chip').forEach(c => c.classList.remove('active'));
    showToast('Fields cleared');
  }

  function updateTaskHelp() {
    const k = ($('task').value || '').toLowerCase().trim();
    $('task-help').textContent = TASK_DEFS[k] ? 'Meaning: ' + TASK_DEFS[k] : '';
    qsa('.chip').forEach(c => c.classList.toggle('active', c.dataset.word === k));
  }

  // Build chips
  const chipRow = $('taskChips');
  Object.keys(TASK_DEFS).forEach(word => {
    const chip = document.createElement('button');
    chip.className = 'chip'; chip.type = 'button';
    chip.textContent = word; chip.dataset.word = word;
    chip.addEventListener('click', () => { $('task').value = word; updateTaskHelp(); });
    chipRow.appendChild(chip);
  });

  // Restore saved values
  const uData = loadUnderstand();
  ['brief','task','topic','limit'].forEach(k => $(k).value = uData[k] || '');
  updateTaskHelp();

  $('task').addEventListener('input', updateTaskHelp);
  $('saveUnderstand').addEventListener('click', saveUnderstand);
  $('clearUnderstand').addEventListener('click', clearUnderstand);

  const exCard = $('exampleCard');
  $('toggleExample').addEventListener('click', () => exCard.classList.toggle('hidden'));
  $('closeExample').addEventListener('click',  () => exCard.classList.add('hidden'));
  $('useExample').addEventListener('click', () => {
    $('brief').value = 'Analyse the impact of social media on adolescent wellbeing in Australia since 2020.';
    $('task').value  = 'analyse';
    $('topic').value = 'Social media and adolescent wellbeing';
    $('limit').value = 'Australia; since 2020';
    saveUnderstand();
    exCard.classList.add('hidden');
  });

  /* â”€â”€ CALM & FOCUS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  const CALM_MAP = {
    breath: { icon:'ğŸŒ¬', title:'Breath Anchor',   text: 'Why: Longer exhales activate the parasympathetic nervous system.\n\nTry: Breathe in for 4 counts, out for 6 counts. Repeat 6 times. If your mind wanders, that\'s normal â€” just return once. Then pick one small task.' },
    scan:   { icon:'ğŸ§', title:'Body Scan',       text: 'Why: Brings attention out of racing thoughts and into the present.\n\nTry: Scan slowly from feet â†’ legs â†’ back â†’ shoulders â†’ face. No forcing. Just noticing. Then choose one small next step.' },
    wander: { icon:'ğŸ§ ', title:'Mind Wandering',  text: 'Why: Noticing where attention goes builds awareness over time.\n\nTry: Notice where your mind just went â€” worry, planning, memory? Curiosity about this is the practice. Then return gently to breath.' },
    note:   { icon:'ğŸ·', title:'Gentle Noting',   text: 'Why: Naming what you\'re experiencing creates a small space from it.\n\nTry: Label it once â€” thinking, hearing, feeling, judging, imagining. Say it softly. Then return to your anchor.' },
    sense:  { icon:'ğŸ‘', title:'Six Senses',      text: 'Why: Anchors scattered attention in the present moment.\n\nTry: Notice one sound, one sight, one body sensation, and one thought or image. Take your time. Then return to breath.' },
    pulse:  { icon:'ğŸŒŠ', title:'Visual Reset',    text: 'Why: Visual rhythm can settle attention and regulate the nervous system.\n\nTry: Watch the circle expand and contract for 30â€“60 seconds. No thinking required. Then pick one small task.' },
    kind:   null
  };

  const KIND_WORDS = ['You are doing enough.', 'Slow is allowed.', 'This is hard, not failure.', 'Pick the next tiny step. Then stop.'];

  let orbTimers = [];

  function clearOrbTimers() { orbTimers.forEach(clearTimeout); orbTimers = []; }

  function startOrbCycle() {
    clearOrbTimers();
    const orb = $('orb');
    function inhale() {
      orb.className = 'orb inhale'; orb.textContent = 'Breathe inâ€¦';
      orbTimers.push(setTimeout(exhale, 4000));
    }
    function exhale() {
      orb.className = 'orb exhale'; orb.textContent = 'Breathe outâ€¦';
      orbTimers.push(setTimeout(inhale, 6000));
    }
    inhale();
  }

  function stopOrb() {
    clearOrbTimers();
    const orb = $('orb');
    orb.className = 'orb exhale';
    orb.textContent = 'Ready';
  }

  function showCalm(key) {
    $('kindWords').classList.remove('show');
    $('calmInsight').classList.add('hidden');
    if (key === 'kind') {
      $('kindWords').innerHTML = KIND_WORDS.map(l => `<div>${l}</div>`).join('');
      $('kindWords').classList.add('show');
      stopOrb();
    } else {
      const d = CALM_MAP[key];
      $('calmInsightIcon').textContent   = d.icon;
      $('calmInsightTitle').textContent  = d.title;
      $('calmInsightText').textContent   = d.text;
      $('calmBadge').textContent         = 'ready';
      $('calmInsight').classList.remove('hidden');
      (key === 'pulse' || key === 'breath') ? startOrbCycle() : stopOrb();
    }
  }

  qsa('[data-calm]').forEach(btn => btn.addEventListener('click', () => showCalm(btn.dataset.calm)));

  /* â”€â”€ STRESS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  const STRESS_MAP = {
    sleep:   { title:'Sleep',         text: 'Why: Sleep is when memory consolidates and emotional regulation resets.\n\nTry tonight: Phone off 30 minutes before bed. Consistent bedtime and wake time. Dark, cool room. One good night makes a measurable difference.' },
    break:   { title:'Breaks',        text: 'Why: Sustained focus without breaks depletes working memory quickly.\n\nTry: 15â€“25 minutes focused work â†’ stand up â†’ stretch or walk briefly â†’ return. Keep your phone out of reach during work blocks.' },
    move:    { title:'Move',          text: 'Why: Even brief movement boosts mood-regulating neurochemicals and improves thinking.\n\nTry: A 5-minute walk, shoulder rolls, or light stretching. No "workout" required.' },
    plan:    { title:'Planning',      text: 'Why: Unclear next actions increase ambient anxiety.\n\nTry: Write down one thing to do today and one for tomorrow. That is enough. A short list works better than a long one.' },
    chunk:   { title:'Chunking',      text: 'Why: Large tasks overwhelm working memory and make starting feel impossible.\n\nTry: Open file â†’ add title â†’ write one sentence. Each small win reduces the wall and builds momentum.' },
    cycle:   { title:'Focus Cycles',  text: 'Why: Short structured cycles reduce mental fatigue and decision overload.\n\nTry: 25/5, 15/5, or 10/3 â€” work then break. Adjust anytime. Stopping early is not failing; the structure itself is helpful.' },
    support: { title:'Get Support',   text: 'Options available to you:\n\nâ€¢ Book an Academic Skills appointment\nâ€¢ Use a draft feedback service (e.g., Studiosity if available)\nâ€¢ Ask your lecturer or tutor a specific question\nâ€¢ Contact student wellbeing services\n\nGetting support is part of succeeding â€” not a sign of struggling.' }
  };

  function showStress(key) {
    const d = STRESS_MAP[key];
    $('stressInsightTitle').textContent = d.title;
    $('stressBadge').textContent        = 'ready';
    $('stressInsightText').textContent  = d.text;
    $('stressInsight').classList.remove('hidden');
    const cycleBox = $('cycleBox');
    if (key === 'cycle') { cycleBox.classList.remove('hidden'); syncCycle(); }
    else { cycleBox.classList.add('hidden'); stopCycle(); }
  }

  qsa('[data-stress]').forEach(btn => btn.addEventListener('click', () => showStress(btn.dataset.stress)));

  /* â”€â”€ FOCUS CYCLE TIMER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  let cycleTimer = null, cycleMode = 'work', remaining = 1500, totalSecs = 1500;

  const fmtTime = s => `${String(Math.floor(s/60)).padStart(2,'0')}:${String(s%60).padStart(2,'0')}`;

  function syncCycle() {
    const w = parseInt($('workMin').value) * 60;
    const b = parseInt($('breakMin').value) * 60;
    remaining = totalSecs = (cycleMode === 'work' ? w : b);
    updateCycleDisplay();
  }

  function updateCycleDisplay() {
    $('cycleTime').textContent  = fmtTime(remaining);
    $('cycleMode').textContent  = cycleMode === 'work' ? 'WORK' : 'BREAK';
    $('cycleTime').className    = 'timer-time' + (cycleMode === 'break' ? ' break' : '');
    $('cycleBar').style.width   = (totalSecs > 0 ? (remaining / totalSecs) * 100 : 100) + '%';
  }

  function startCycle() {
    if (cycleTimer) return;
    $('cycleHint').textContent = 'Running. Pause anytime.';
    cycleTimer = setInterval(() => {
      remaining = Math.max(0, remaining - 1);
      updateCycleDisplay();
      if (remaining === 0) {
        const wasWork = cycleMode === 'work';
        cycleMode = wasWork ? 'break' : 'work';
        const w = parseInt($('workMin').value) * 60;
        const b = parseInt($('breakMin').value) * 60;
        remaining = totalSecs = (cycleMode === 'work' ? w : b);
        $('cycleHint').textContent = wasWork ? 'ğŸ›‘ Break time â€” step away.' : 'â–¶ Back to work when ready.';
        updateCycleDisplay();
      }
    }, 1000);
  }

  function stopCycle() {
    clearInterval(cycleTimer); cycleTimer = null;
    $('cycleHint').textContent = 'Paused. Start again when ready.';
  }

  function resetCycle() {
    stopCycle(); cycleMode = 'work'; syncCycle();
    $('cycleHint').textContent = 'Start a cycle. Stop early if you need to.';
  }

  $('workMin').addEventListener('change', resetCycle);
  $('breakMin').addEventListener('change', resetCycle);
  $('cycleStart').addEventListener('click', startCycle);
  $('cycleStop').addEventListener('click', stopCycle);
  $('cycleReset').addEventListener('click', resetCycle);

  /* â”€â”€ FINISH CHECKLIST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  const FINISH_KEY   = 'cp_finish';
  const FINISH_ITEMS = [
    'Check the rubric / marking criteria',
    'Answered the question directly',
    'Used the required sources or readings',
    'Met word count requirements',
    'Structure matches the task (intro/body/conclusion where needed)',
    'Proofread for clarity â€” read aloud if possible',
    'Spellcheck and grammar check done',
    'In-text citations match the reference list',
    'Referencing style checked (APA or required format)',
    'Used a draft feedback service if available (e.g., Studiosity)',
    'Applied feedback from your last assessment',
    'Saved a final copy (and exported to PDF if required)',
    'Uploaded and confirmed submission receipt',
    'Booked Academic Skills support if needed'
  ];

  function loadFinish() {
    const s = storage(FINISH_KEY);
    return (Array.isArray(s) && s.length === FINISH_ITEMS.length) ? s : FINISH_ITEMS.map(t => ({ t, done: false }));
  }

  function renderFinish() {
    const container = $('finishList');
    const items = loadFinish();
    container.innerHTML = '';
    const updateCount = () => {
      const n = items.filter(x => x.done).length;
      const total = items.length || 1;
      const pct = Math.round((n/total)*100);
      $('finishCount').innerHTML = `<span>${n}</span> of ${items.length} checked`;
      const bar = $('finishBar'); const pctEl = $('finishPercent');
      if (bar) bar.style.width = pct + '%';
      if (pctEl) pctEl.textContent = pct + '% complete';
      if (n === items.length && items.length > 0 && !container.dataset.doneOnce) {
        container.dataset.doneOnce = '1';
        showToast('All done âœ“ Submit with confidence.');
      }
      if (n < items.length) {
        container.dataset.doneOnce = '';
      }
    };
    updateCount();
    items.forEach((item, i) => {
      const row = document.createElement('div');
      row.className = 'check-item' + (item.done ? ' done' : '');
      row.setAttribute('role', 'listitem');
      row.innerHTML = `<input type="checkbox" id="f${i}" ${item.done ? 'checked' : ''} aria-label="${item.t}">
        <label class="check-label" for="f${i}">${item.t}</label>`;
      row.querySelector('input').addEventListener('change', e => {
        items[i].done = e.target.checked;
        row.classList.toggle('done', items[i].done);
        storage(FINISH_KEY, items);
        updateCount();
      });
      container.appendChild(row);
    });
  }

  $('resetFinish').addEventListener('click', () => {
    storage(FINISH_KEY, FINISH_ITEMS.map(t => ({ t, done: false })));
    renderFinish();
    showToast('Checklist reset âœ“');
  });

  /* â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  go('home');

})();
</script>
</body>
</html>
