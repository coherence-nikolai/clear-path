<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Clear Path V2.2</title>
<meta name="theme-color" content="#0b1214"/>
<style>
:root{
  --bg:#0b1214;--fg:#eaf2ef;--mut:#a9b7b1;--acc:#78f0b1;
  --card:#101a1d;--b:rgba(255,255,255,.08);--r:18px;
  --soft:rgba(120,240,177,.10);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:radial-gradient(1200px 800px at 20% 0%,#102329 0%,var(--bg) 55%);
  color:var(--fg);
  min-height:100vh;
}
.wrap{max-width:860px;margin:auto;padding:22px 16px 44px}
h1{margin:0;font-size:20px}
.sub{color:var(--mut);font-size:13px}
.panel{
  background:var(--card);
  border:1px solid var(--b);
  border-radius:var(--r);
  margin-bottom:16px;
}
.head{padding:14px;border-bottom:1px solid var(--b)}
.body{padding:14px}
.grid{display:grid;grid-template-columns:1fr;gap:10px}
@media(min-width:720px){.grid{grid-template-columns:1fr 1fr}}
.btnBig{
  padding:14px 14px;
  border-radius:14px;
  border:1px solid var(--b);
  background:#0f171a;
  color:var(--fg);
  cursor:pointer;
  font-size:15px;
  font-weight:650;
  text-align:center;
}
.btnBig:hover{border-color:var(--acc)}
.btn{
  padding:7px 11px;
  border-radius:10px;
  border:1px solid var(--b);
  background:#0f171a;
  color:var(--fg);
  cursor:pointer;
}
.primary{background:var(--soft);border-color:rgba(120,240,177,.40)}
.danger{border-color:rgba(255,120,120,.35);background:rgba(255,120,120,.08)}
.hidden{display:none}
textarea,input,select{
  width:100%;
  padding:9px 10px;
  border-radius:12px;
  border:1px solid var(--b);
  background:#0f171a;
  color:var(--fg);
  outline:none;
}
.small{font-size:12px;color:var(--mut);line-height:1.35}
hr{border:none;border-top:1px solid var(--b);margin:12px 0}

.check{
  display:flex;
  gap:10px;
  align-items:flex-start;
  padding:9px 11px;
  border:1px solid var(--b);
  border-radius:12px;
  width:100%;
  max-width:100%;
}
.check input{flex-shrink:0;margin-top:3px}
.check span{flex:1;line-height:1.35;word-break:break-word}

.card{
  border:1px solid var(--b);
  border-radius:14px;
  padding:12px 12px;
  background:rgba(255,255,255,.02);
}
.cardTitle{
  display:flex;align-items:center;justify-content:space-between;
  gap:10px;font-weight:700;
}
.badge{
  font-size:12px;color:var(--mut);
  border:1px solid var(--b);border-radius:999px;
  padding:3px 9px;background:rgba(255,255,255,.02);
}

.orb{
  width:150px;height:150px;border-radius:50%;
  border:1px solid var(--b);
  background:radial-gradient(circle,#78f0b133,#0000);
  display:flex;align-items:center;justify-content:center;
  transition:all 3.2s ease;
}
.orb.in{transform:scale(1.08)}
.orb.out{transform:scale(.94)}
.center{display:flex;justify-content:center}
.row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.kbd{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;font-size:12px;color:var(--mut)}
</style>
</head>

<body>
<div class="wrap">
<header style="margin-bottom:14px">
  <h1>Clear Path</h1>
  <div class="sub">Start ‚Ä¢ Understand ‚Ä¢ Calm & Focus ‚Ä¢ Stress ‚Ä¢ Finish</div>
</header>

<!-- HOME -->
<section class="panel" id="home">
  <div class="head">
    <h2>What do you need?</h2>
    <div class="sub">One step is enough.</div>
  </div>
  <div class="body grid">
    <button class="btnBig" id="navStart">‚ñ∂ Start</button>
    <button class="btnBig" id="navUnderstand">üß© Understand</button>
    <button class="btnBig" id="navCalm">üåä Calm & Focus</button>
    <button class="btnBig" id="navStress">ü´∂ Manage Stress</button>
    <button class="btnBig" id="navFinish">‚úÖ Finish</button>
  </div>
</section>

<!-- START -->
<section class="panel hidden" id="start">
  <div class="head">
    <h2>Prepare & Begin</h2>
    <button class="btn" data-home>Home</button>
  </div>
  <div class="body">
    <div class="sub">Get ready first:</div>
    <div id="prep"></div>

    <div class="card" style="margin-top:12px">
      <div class="cardTitle">
        <div>Choose your starting point</div>
        <div class="badge">no timer by default</div>
      </div>
      <div class="small" style="margin-top:6px">
        If you feel activated, start with <b>Calm & Focus</b>. If you feel clear, go straight to <b>Understand</b>.
      </div>
      <div class="row" style="margin-top:10px">
        <button class="btn primary" id="beginCalm">Begin with Calm & Focus</button>
        <button class="btn" id="beginUnderstand">Begin with Understand</button>
      </div>
    </div>
  </div>
</section>

<!-- UNDERSTAND -->
<section class="panel hidden" id="understand">
  <div class="head">
    <h2>Unpack the Question</h2>
    <button class="btn" data-home>Home</button>
  </div>
  <div class="body">
    <textarea id="brief" placeholder="Paste assignment question..."></textarea>

    <div class="row" style="margin-top:10px">
      <button class="btn" id="toggleExample">See an example</button>
      <button class="btn" id="clearUnderstand">Clear fields</button>
    </div>

    <div class="card hidden" id="exampleCard" style="margin-top:10px">
      <div class="cardTitle">
        <div>Example: how to unpack</div>
        <div class="badge">tap ‚ÄúUse this‚Äù</div>
      </div>
      <div class="small" style="margin-top:8px">
        <b>Question:</b> Analyse the impact of social media on adolescent wellbeing in Australia since 2020.
      </div>
      <div class="small" style="margin-top:6px">
        <b>Approach (task word):</b> Analyse
      </div>
      <div class="small" style="margin-top:6px">
        <b>General topic:</b> Social media and adolescent wellbeing
      </div>
      <div class="small" style="margin-top:6px">
        <b>Limits:</b> Australia; since 2020
      </div>
      <div class="row" style="margin-top:10px">
        <button class="btn primary" id="useExample">Use this</button>
      </div>
    </div>

    <div class="small" style="margin-top:10px">How are you being asked to approach the assignment question?</div>
    <input id="task" placeholder="e.g., analyse, discuss, evaluate"/>

    <div class="small" style="margin-top:10px">What is the general topic of this assignment?</div>
    <input id="topic" placeholder="e.g., stress and learning"/>

    <div class="small" style="margin-top:10px">Limits: time, place, group, theory, method?</div>
    <input id="limit" placeholder="e.g., Australia, since 2020, mature-aged students"/>

    <div class="row" style="margin-top:10px">
      <button class="btn primary" id="saveUnderstand">Save</button>
      <div class="small" id="savedBadge" style="margin-left:6px"></div>
    </div>

    <div class="sub" id="taskHelp" style="margin-top:8px"></div>

    <hr/>

    <div class="small">Task word guide (tap to fill):</div>
    <div class="row" id="taskList" style="margin-top:8px"></div>

    <div class="small" style="margin-top:8px">
      Tip: task words tell you <i>how</i> to think. Limits tell you what to <i>include</i> and what to <i>leave out</i>.
    </div>
  </div>
</section>

<!-- CALM -->
<section class="panel hidden" id="calm">
  <div class="head">
    <h2>Calm & Focus Tools</h2>
    <button class="btn" data-home>Home</button>
  </div>
  <div class="body">
    <div class="grid">
      <button class="btnBig" data-tool="breath">üå¨ Breath Anchor</button>
      <button class="btnBig" data-tool="scan">üßç Body Scan</button>
      <button class="btnBig" data-tool="wander">üß† Mind Wandering</button>
      <button class="btnBig" data-tool="note">üè∑ Gentle Noting</button>
      <button class="btnBig" data-tool="sense">üëÅ Six Senses</button>
      <button class="btnBig" data-tool="pulse">üåä Visual Reset</button>
      <button class="btnBig" data-tool="kind">ü´∂ Kind Words</button>
    </div>

    <div class="center" style="margin-top:14px">
      <div class="orb out" id="orb">Ready</div>
    </div>

    <div class="card" id="calmCard" style="margin-top:12px">
      <div class="cardTitle">
        <div id="calmTitle">Choose a tool</div>
        <div class="badge" id="calmBadge">tap above</div>
      </div>
      <div class="small" id="calmText" style="margin-top:8px"></div>
      <div class="row" style="margin-top:10px">
        <button class="btn" id="goUnderstandFromCalm">Return to Understand</button>
        <button class="btn" id="goStartFromCalm">Back to Start</button>
      </div>
      <div class="small" style="margin-top:8px">
        Need structure? Try <b>Focus Cycles</b> in Manage Stress.
      </div>
    </div>
  </div>
</section>

<!-- STRESS -->
<section class="panel hidden" id="stress">
  <div class="head">
    <h2>Manage Study Stress</h2>
    <button class="btn" data-home>Home</button>
  </div>
  <div class="body">
    <div class="grid">
      <button class="btnBig" data-stress="sleep">üõå Sleep</button>
      <button class="btnBig" data-stress="break">üìµ Breaks</button>
      <button class="btnBig" data-stress="move">üèÉ Move</button>
      <button class="btnBig" data-stress="plan">üìÖ Planning</button>
      <button class="btnBig" data-stress="chunk">üß© Chunking</button>
      <button class="btnBig" data-stress="cycle">üïí Focus Cycles</button>
      <button class="btnBig" data-stress="support">ü´Ç Get Support</button>
    </div>

    <div class="card" id="stressCard" style="margin-top:12px">
      <div class="cardTitle">
        <div id="stressTitle">Choose a support</div>
        <div class="badge" id="stressBadge">tap above</div>
      </div>
      <div class="small" id="stressText" style="margin-top:8px"></div>

      <!-- Focus cycles timer UI -->
      <div id="cycleBox" class="hidden" style="margin-top:12px">
        <hr/>
        <div class="row">
          <div class="badge">optional</div>
          <div class="small">Use a timer if it helps. Adjust anytime.</div>
        </div>
        <div class="row" style="margin-top:10px">
          <label class="small">Work</label>
          <select id="workMin">
            <option value="10">10 min</option>
            <option value="15">15 min</option>
            <option value="25" selected>25 min</option>
          </select>
          <label class="small">Break</label>
          <select id="breakMin">
            <option value="3">3 min</option>
            <option value="5" selected>5 min</option>
            <option value="10">10 min</option>
          </select>
        </div>
        <div class="card" style="margin-top:10px">
          <div class="cardTitle">
            <div id="cycleMode">Work</div>
            <div class="badge" id="cycleTime">25:00</div>
          </div>
          <div class="small" id="cycleHint" style="margin-top:6px">Start a cycle. Stop early if you need to.</div>
          <div class="row" style="margin-top:10px">
            <button class="btn primary" id="cycleStart">Start</button>
            <button class="btn" id="cycleStop">Stop</button>
            <button class="btn danger" id="cycleReset">Reset</button>
          </div>
        </div>
      </div>

      <div class="row" style="margin-top:10px">
        <button class="btn" id="goFinishFromStress">Go to Finish</button>
        <button class="btn" id="goCalmFromStress">Go to Calm & Focus</button>
      </div>
    </div>
  </div>
</section>

<!-- FINISH -->
<section class="panel hidden" id="finish">
  <div class="head">
    <h2>Finish</h2>
    <button class="btn" data-home>Home</button>
  </div>
  <div class="body">
    <div class="sub">Final checks (pick what applies):</div>
    <div id="finishList" style="margin-top:10px"></div>

    <div class="card" style="margin-top:12px">
      <div class="cardTitle">
        <div>Last step</div>
        <div class="badge">reduce risk</div>
      </div>
      <div class="small" style="margin-top:8px">
        If you are uncertain, tired, or stuck, it can help to book an Academic Skills appointment, or use any draft feedback service available to you.
      </div>
    </div>
  </div>
</section>

</div>

<script>
(function(){
  const $ = (id)=>document.getElementById(id);

  /* NAV */
  const screens=['home','start','understand','calm','stress','finish'];
  function go(id){
    screens.forEach(s=>$(s).classList.add('hidden'));
    $(id).classList.remove('hidden');
    if(id==='finish') renderFinish();
  }

  // Top nav
  $('navStart').addEventListener('click', ()=>go('start'));
  $('navUnderstand').addEventListener('click', ()=>go('understand'));
  $('navCalm').addEventListener('click', ()=>go('calm'));
  $('navStress').addEventListener('click', ()=>go('stress'));
  $('navFinish').addEventListener('click', ()=>go('finish'));

  // Home buttons
  document.querySelectorAll('[data-home]').forEach(btn=>btn.addEventListener('click', ()=>go('home')));

  /* START */
  const prepKey='prep22';
  const prepItems=[
    'Set up desk',
    'Close extra tabs',
    'Open document',
    'Read question once',
    'Choose first task'
  ];

  function loadPrep(){
    const raw=localStorage.getItem(prepKey);
    if(!raw){
      const init=prepItems.map(t=>({t,done:false}));
      localStorage.setItem(prepKey, JSON.stringify(init));
      return init;
    }
    try { return JSON.parse(raw) || []; } catch { return prepItems.map(t=>({t,done:false})); }
  }

  let prep=loadPrep();

  function renderPrep(){
    const p=$('prep');
    p.innerHTML='';
    prep.forEach((item, idx)=>{
      const row=document.createElement('div');
      row.className='check';
      row.innerHTML=`<input type="checkbox" ${item.done?'checked':''}><span>${item.t}</span>`;
      row.querySelector('input').addEventListener('change', (e)=>{
        prep[idx].done = e.target.checked;
        localStorage.setItem(prepKey, JSON.stringify(prep));
      });
      p.appendChild(row);
    });
  }

  $('beginCalm').addEventListener('click', ()=>go('calm'));
  $('beginUnderstand').addEventListener('click', ()=>go('understand'));

  /* UNDERSTAND */
  const brief=$('brief'), task=$('task'), topic=$('topic'), limit=$('limit');
  const taskHelp=$('taskHelp'), savedBadge=$('savedBadge');

  const understandKey='understand22';
  function loadUnderstand(){
    const raw=localStorage.getItem(understandKey);
    if(!raw) return {brief:'',task:'',topic:'',limit:''};
    try { return JSON.parse(raw) || {brief:'',task:'',topic:'',limit:''}; } catch { return {brief:'',task:'',topic:'',limit:''}; }
  }
  function saveUnderstand(){
    const data={brief:brief.value, task:task.value, topic:topic.value, limit:limit.value};
    localStorage.setItem(understandKey, JSON.stringify(data));
    updateTaskHelp();
    savedBadge.textContent='Saved';
    setTimeout(()=>savedBadge.textContent='', 1200);
  }
  function clearUnderstand(){
    brief.value=''; task.value=''; topic.value=''; limit.value='';
    saveUnderstand();
    taskHelp.textContent='';
  }

  const taskDefs={
    analyse:'Break into parts and explain how they connect.',
    discuss:'Explore different views with evidence.',
    evaluate:'Judge strengths and weaknesses using sources.',
    reflect:'Link experience with theory.',
    describe:'Give clear, detailed information.',
    compare:'Show similarities and differences.',
    explain:'Show how and why something happens.',
    justify:'Support your position with reasons.',
    summarise:'Present key points briefly.',
    synthesise:'Combine sources to form a clear overall position.'
  };

  function updateTaskHelp(){
    const k=(task.value||'').toLowerCase().trim();
    taskHelp.textContent = taskDefs[k] ? ('Meaning: ' + taskDefs[k]) : '';
  }

  $('saveUnderstand').addEventListener('click', saveUnderstand);
  $('clearUnderstand').addEventListener('click', clearUnderstand);

  // Example toggle
  const exampleCard=$('exampleCard');
  $('toggleExample').addEventListener('click', ()=>{
    exampleCard.classList.toggle('hidden');
  });
  $('useExample').addEventListener('click', ()=>{
    brief.value='Analyse the impact of social media on adolescent wellbeing in Australia since 2020.';
    task.value='analyse';
    topic.value='Social media and adolescent wellbeing';
    limit.value='Australia; since 2020';
    saveUnderstand();
    exampleCard.classList.add('hidden');
  });

  // Task list buttons
  const taskList=$('taskList');
  Object.keys(taskDefs).forEach(k=>{
    const b=document.createElement('button');
    b.className='btn';
    b.type='button';
    b.textContent=k;
    b.addEventListener('click', ()=>{
      task.value=k;
      updateTaskHelp();
    });
    taskList.appendChild(b);
  });

  // Load saved understand data
  const u=loadUnderstand();
  brief.value=u.brief||'';
  task.value=u.task||'';
  topic.value=u.topic||'';
  limit.value=u.limit||'';
  updateTaskHelp();

  /* CALM */
  const orb=$('orb'), calmTitle=$('calmTitle'), calmBadge=$('calmBadge'), calmText=$('calmText');
  function pulseOrb(){
    orb.className='orb in';
    setTimeout(()=>orb.className='orb out', 3200);
  }
  function showCalm(name){
    const map={
      breath:{
        title:'Breath Anchor',
        text:'Why: Longer exhales calm the nervous system. Try: In 4, out 6 for 6 breaths. If distracted, return once. Then do one small task.'
      },
      scan:{
        title:'Body Scan',
        text:'Why: Brings attention out of racing thoughts. Try: Scan from feet ‚Üí legs ‚Üí back ‚Üí shoulders ‚Üí face. No forcing. Then choose one small step.'
      },
      wander:{
        title:'Mind Wandering',
        text:'Why: Noticing builds focus over time. Try: Notice where the mind jumped to (worry, planning, memory). Curiosity is success. Then return to breath.'
      },
      note:{
        title:'Gentle Noting',
        text:'Why: Naming creates space. Try: Label once: thinking, hearing, feeling, judging, imagining. Then return to your anchor.'
      },
      sense:{
        title:'Six Senses',
        text:'Why: Grounds attention. Try: One sound, one sight, one body sensation, one thought/image. Then return to breath.'
      },
      pulse:{
        title:'Visual Reset',
        text:'Why: Rhythm can regulate attention. Try: Watch the circle for 30‚Äì60 seconds. No thinking needed. Then pick one small task.'
      },
      kind:{
        title:'Kind Words',
        text:'You are doing enough. Slow is allowed. This is hard, not failure. Pick the next tiny step, then stop.'
      }
    };
    const d=map[name];
    calmTitle.textContent=d.title;
    calmBadge.textContent='ready';
    calmText.textContent=d.text;
    pulseOrb();
  }

  document.querySelectorAll('[data-tool]').forEach(btn=>{
    btn.addEventListener('click', ()=>showCalm(btn.getAttribute('data-tool')));
  });

  $('goUnderstandFromCalm').addEventListener('click', ()=>go('understand'));
  $('goStartFromCalm').addEventListener('click', ()=>go('start'));

  /* STRESS */
  const stressTitle=$('stressTitle'), stressBadge=$('stressBadge'), stressText=$('stressText');
  const cycleBox=$('cycleBox');

  function showStress(kind){
    const tips={
      sleep:{
        title:'Sleep',
        text:'Why: Sleep supports memory and emotion. Try tonight: phone off 30 min before bed, consistent bedtime, dark room. One good night helps.'
      },
      break:{
        title:'Breaks',
        text:'Why: Switching drains focus. Try: 15‚Äì25 min work ‚Üí stand ‚Üí stretch ‚Üí return. If possible, keep your phone out of reach.'
      },
      move:{
        title:'Move',
        text:'Why: Movement boosts mood and thinking. Try: 5 min walk, stretch shoulders, light movement. No ‚Äúworkout‚Äù required.'
      },
      plan:{
        title:'Planning',
        text:'Why: Unclear tasks increase anxiety. Try: write 1 thing today and 1 thing tomorrow. That is enough.'
      },
      chunk:{
        title:'Chunking',
        text:'Why: Big tasks overload working memory. Try: open file ‚Üí add title ‚Üí write one sentence. Small wins matter.'
      },
      cycle:{
        title:'Focus Cycles',
        text:'Why: Short cycles reduce fatigue. Try: 25/5, 15/5, or 10/3. Adjust anytime. You are not failing if you stop early.'
      },
      support:{
        title:'Get Support',
        text:'Options: book Academic Skills, use draft feedback (e.g., Studiosity if available), ask your lecturer/tutor, or contact wellbeing. Support is part of success.'
      }
    };
    const d=tips[kind];
    stressTitle.textContent=d.title;
    stressBadge.textContent='ready';
    stressText.textContent=d.text;

    // Show/hide focus cycle timer UI
    if(kind==='cycle'){ cycleBox.classList.remove('hidden'); syncCycleFromSelects(); }
    else { cycleBox.classList.add('hidden'); stopCycle(); }
  }

  document.querySelectorAll('[data-stress]').forEach(btn=>{
    btn.addEventListener('click', ()=>showStress(btn.getAttribute('data-stress')));
  });

  $('goFinishFromStress').addEventListener('click', ()=>go('finish'));
  $('goCalmFromStress').addEventListener('click', ()=>go('calm'));

  /* Focus Cycles timer */
  const workMin=$('workMin'), breakMin=$('breakMin');
  const cycleMode=$('cycleMode'), cycleTime=$('cycleTime'), cycleHint=$('cycleHint');
  const cycleStart=$('cycleStart'), cycleStopBtn=$('cycleStop'), cycleReset=$('cycleReset');

  let cycleTimer=null;
  let mode='work'; // 'work' or 'break'
  let remaining=25*60;

  function fmt(sec){
    const m=Math.floor(sec/60);
    const s=sec%60;
    return String(m).padStart(2,'0')+':'+String(s).padStart(2,'0');
  }

  function syncCycleFromSelects(){
    const w=int(workMin.value)*60;
    const b=int(breakMin.value)*60;
    if(mode==='work') remaining=w;
    if(mode==='break') remaining=b;
    cycleTime.textContent=fmt(remaining);
    cycleMode.textContent=mode==='work'?'Work':'Break';
  }

  function int(x){ return parseInt(x,10)||0; }

  function startCycle(){
    if(cycleTimer) return;
    cycleHint.textContent='Running. Pause anytime.';
    cycleTimer=setInterval(()=>{
      remaining=Math.max(0, remaining-1);
      cycleTime.textContent=fmt(remaining);
      if(remaining===0){
        // flip mode
        mode = (mode==='work') ? 'break' : 'work';
        cycleMode.textContent = (mode==='work') ? 'Work' : 'Break';
        const next = (mode==='work') ? int(workMin.value)*60 : int(breakMin.value)*60;
        remaining = next;
        cycleTime.textContent=fmt(remaining);
        cycleHint.textContent='Switched. Continue or stop.';
      }
    }, 1000);
  }

  function stopCycle(){
    if(cycleTimer){ clearInterval(cycleTimer); cycleTimer=null; }
    cycleHint.textContent='Stopped. Start again if it helps.';
  }

  function resetCycle(){
    stopCycle();
    mode='work';
    remaining=int(workMin.value)*60;
    cycleMode.textContent='Work';
    cycleTime.textContent=fmt(remaining);
    cycleHint.textContent='Start a cycle. Stop early if you need to.';
  }

  workMin.addEventListener('change', ()=>{ resetCycle(); });
  breakMin.addEventListener('change', ()=>{ resetCycle(); });

  cycleStart.addEventListener('click', startCycle);
  cycleStopBtn.addEventListener('click', stopCycle);
  cycleReset.addEventListener('click', resetCycle);

  /* FINISH */
  const finishKey='finish22';
  const finishItems=[
    'Check the rubric / marking criteria',
    'Answered the question directly',
    'Used the required sources / readings',
    'Met word count requirements',
    'Structure matches the task (intro/body/conclusion where needed)',
    'Proofread for clarity (read aloud if possible)',
    'Spellcheck and grammar check',
    'In-text citations match reference list',
    'APA formatting check (headings, italics, punctuation)',
    'Use a draft feedback service if available (e.g., Studiosity)',
    'Check any tutor/marker feedback from last assessment and apply it',
    'Save final copy (and export to PDF if required)',
    'Upload and confirm submission receipt',
    'Book Academic Skills support if needed'
  ];

  function loadFinish(){
    const raw=localStorage.getItem(finishKey);
    if(!raw){
      const init=finishItems.map(t=>({t,done:false}));
      localStorage.setItem(finishKey, JSON.stringify(init));
      return init;
    }
    try { return JSON.parse(raw) || []; } catch { return finishItems.map(t=>({t,done:false})); }
  }

  function renderFinish(){
    const f=$('finishList');
    const items=loadFinish();
    f.innerHTML='';
    items.forEach((item, idx)=>{
      const row=document.createElement('div');
      row.className='check';
      row.innerHTML=`<input type="checkbox" ${item.done?'checked':''}><span>${item.t}</span>`;
      row.querySelector('input').addEventListener('change', (e)=>{
        items[idx].done=e.target.checked;
        localStorage.setItem(finishKey, JSON.stringify(items));
      });
      f.appendChild(row);
    });
  }

  // INIT
  renderPrep();
  go('home');

  // default guidance text so it's never blank
  $('calmText').textContent='Pick one tool above. If your mind wanders, that is normal.';
  $('stressText').textContent='Pick one support above. Small steps reduce stress.';
})();
</script>

</body>
</html>
